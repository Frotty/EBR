package GameInit
import EntityManagement
import Startmazes
import PlayerData
import JukeBox
import Encoder
import LZW

init
	callGen()
	startEntityLoop()
	getTimer().start(0.01, () -> initGame())
	
@compiletime function callGen()
	callFunctionsWithAnnotation("@objectgen")

function initGame()
	printTimed("Waiting for players..", 10.)
	initPlayers()
	CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.00, "ReplaceableTextures\\CameraMasks\\Black_mask.blp", 0, 0, 0, 0)
	CreateFogModifierRect(STAFF_PLAYER, FOG_OF_WAR_VISIBLE, GetPlayableMapRect(), false, false)
	VolumeGroupReset()
	EndThematicMusic()
	GetExpiredTimer().start(0.01, () -> initOne())

function initOne()
	callFunctionsWithAnnotation("@init1")
	GetExpiredTimer().start(0.01, () -> initPartTwo())

function initPartTwo()
	callFunctionsWithAnnotation("@init2")
	GetExpiredTimer().start(0.01, () -> partThree())

function partThree()
	GetExpiredTimer().release()
	initStartmazes()
	checkPlayerLocalFiles()
	jukeBox.playNextMusic()
	// let bs = new BigString()
	// DEBUG_LEVEL = Loglevel.DEBUG
	// let test = "0123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789"
	// // bs.addString(test)
	// // bs.addString("xy0123456789")
	// // print("bigstringlength: " + bs.getLength().toString())
	// // print("399: " + bs.getString(399,1))
	// // print("400: " + bs.getString(400,1))
	// // print("401: " + bs.getString(401,1))
	// bs.addString("dgfdgdfggdfgdertjti4u6594685480pr2h438c5n3ÃŸ49837c2056234607uzc5pmj48m4jpht057utck3z5890cpm809u3tzdc89zu2p0tzcu8453z24zuo245za")
	// bs.addString("z534d2f2uzd354d23ud23dv56r3242374zu2f34tz32f423mnthzd3tr4fr3iuzk4rv4ztu32r43u6x524re35u64rx3hzdr52v3zr4h5u6xd43r64r32uvz65rva")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx3ertreterterterv2u3j4d234zdr32xfx4t23zn42tr4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32xfx4t23zn42tr4fjtzjtzjtjj4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32xfx4t23zn42tr4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("230458927h353v6z4358lopvp0i3t478zvct7rc3g4fjc3627trx3i6ftjg5u43t7432jku5t2gc354j12tc1gjk43ztr13uug1jm3c4ztgcju3gtczm34tg4c31a")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32xfx4t23zn42tr4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j5jtzjtzjtzjzjj3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32xfx4t23zn42tr4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32xfx4t23zn42tr4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("3u4675f4365u73fvzr5tj43t5r3tzj45rf3vjz45r4zt5r43f65r4f5u4c5jc3ui54j75c34j53x64535456z32c4344253z3x24c6532654rcu6543xr6234xc6a")
	// bs.addString("u5612c34d231d423j531d25cx435vrxjtzjtzjztjzv4dr23453264rv2u3j4d234zdr32xfx4t23zn42tr4f23tzh4jzjtzjtjtjtj74r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623r467d3ra")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623rte4tert")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623rte4tert")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623rte4tert")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623rte4tert")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r234dxv45623rte4tert")
	// bs.addString("u5612c34d231d423j531d25cx435vrx3u427x63r4dx32v4dr23453264rv2u3j4d234zdr32zjtzjtzjzjtzj4f23tzh4r3dx4563274r2312103123123123131")

	// compress(bs, (PayloadCallback sq) -> begin
	// 	let compressed = sq.customData castTo BigString
	// 	decompress(compressed, (PayloadCallback sq2) -> begin
	// 		let decompressed = sq2.customData castTo BigString
	// 	end)
	// end)

	// print(bs.getString(500, 5)) // 11111

	// let sc = new Scanner()..addDelimiter(" ")..setInput(bs)
	// int i = 0
	// doSeq(3, (SeqCallback cb) -> begin
	// 	if sc.hasNext()
	// 		sc.next()
	// 		i++
	// 	else
	// 		print("found tokens <" + i.toString() + ">")
	// 		cb.terminate()
	// end) 
	